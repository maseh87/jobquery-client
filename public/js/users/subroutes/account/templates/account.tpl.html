<div class="content-header">
    <div class="content-header-block text-left">
        <button class="content-button" ng-click="update(user)">{{ submitText }}</button>
    </div>
    <div class="content-header-block">
        <div class="content-title">Candidate Survey</div>
        <div class="content-tagline">View or complete your candidate survey</div>
    </div>
</div>

<form ng-submit="update()">
<div class="row">

    <div class="content-section container-fluid" ng-if="user">
        <div class="dashbox-title">Job Search Status</div>
        <div class="dashbox dashbox-content">
            <div class="dashbox-icon" ng-click="updateSearchStage('Out')" ng-class="{'dashbox-icon-active':isSearchStage('Out')}">
                <span class="dashbox-icon-dingbat">⦸</span><br>Opt Out
            </div>
            <div class="dashbox-icon" ng-click="updateSearchStage('Early')" ng-class="{'dashbox-icon-active':isSearchStage('Early')}">
                <span class="dashbox-icon-dingbat">➀</span><br>Early
            </div>
            <div class="dashbox-icon" ng-click="updateSearchStage('Mid/Late')" ng-class="{'dashbox-icon-active':isSearchStage('Mid/Late')}">
                <span class="dashbox-icon-dingbat">➁</span><br>Mid/Late
            </div>
            <div class="dashbox-icon" ng-click="updateSearchStage('Closing')" ng-class="{'dashbox-icon-active':isSearchStage('Closing')}">
                <span class="dashbox-icon-dingbat">➂</span><br>Closing
            </div>
            <div class="dashbox-icon" ng-click="updateSearchStage('Accepted')" ng-class="{'dashbox-icon-active':isSearchStage('Accepted')}">
                <span class="dashbox-icon-dingbat">➃</span><br>Accepted
            </div>
        </div>
    </div>

    <div class="content-section container-fluid">
        <div class="formbox-title">Basic Information</div>
        <table class="formbox formbox-basic">
            <tr>
                <th>Name</th>
                <td><input type="text" size="40" ng-model="user.name" required></td>
            </tr>
            <tr>
                <th>Email</th>
                <td><input type="text" size="40" ng-model="user.email" required></td>
            </tr>
            <tr>
                <th>Github</th>
                <td><input type="text" size="40" ng-model="user.github"></td>
            </tr>
            <tr>
                <th>LinkedIn</th>
                <td><input type="text" size="40" ng-model="user.linkedin"></td>
            </tr>
        </table>
    </div>

    <div class="content-section container-fluid">
        <div class="formbox-title">Primary Job Search Location</div>
        <table class="formbox formbox-basic">
            <tr>
                <th>City</th>
                <td><input type="text" size="40" ng-model="user.city"></td>
            </tr>
            <tr>
                <th>State</th>
                <td><select name="state" ng-model="user.state">
                    <option value="California" selected>California</option>
                    <option value="N/A">N/A</option>
                    <option value="Alabama">Alabama</option>
                    <option value="Alaska">Alaska</option>
                    <option value="Arizona">Arizona</option>
                    <option value="Arkansas">Arkansas</option>
                    <option value="California">California</option>
                    <option value="Colorado">Colorado</option>
                    <option value="Connecticut">Connecticut</option>
                    <option value="Delaware">Delaware</option>
                    <option value="Florida">Florida</option>
                    <option value="Georgia">Georgia</option>
                    <option value="Hawaii">Hawaii</option>
                    <option value="Idaho">Idaho</option>
                    <option value="Illinois">Illinois</option>
                    <option value="Indiana">Indiana</option>
                    <option value="Iowa">Iowa</option>
                    <option value="Kansas">Kansas</option>
                    <option value="Kentucky">Kentucky</option>
                    <option value="Louisiana">Louisiana</option>
                    <option value="Maine">Maine</option>
                    <option value="Maryland">Maryland</option>
                    <option value="Massachusetts">Massachusetts</option>
                    <option value="Michigan">Michigan</option>
                    <option value="Minnesota">Minnesota</option>
                    <option value="Mississippi">Mississippi</option>
                    <option value="Missouri">Missouri</option>
                    <option value="Montana">Montana</option>
                    <option value="Nebraska">Nebraska</option>
                    <option value="Nevada">Nevada</option>
                    <option value="New Hampshire">New Hampshire</option>
                    <option value="New Jersey">New Jersey</option>
                    <option value="New Mexico">New Mexico</option>
                    <option value="New York">New York</option>
                    <option value="North Carolina">North Carolina</option>
                    <option value="North Dakota">North Dakota</option>
                    <option value="Ohio">Ohio</option>
                    <option value="Oklahoma">Oklahoma</option>
                    <option value="Oregon">Oregon</option>
                    <option value="Pennsylvania">Pennsylvania</option>
                    <option value="Rhode Island">Rhode Island</option>
                    <option value="South Carolina">South Carolina</option>
                    <option value="South Dakota">South Dakota</option>
                    <option value="Tennessee">Tennessee</option>
                    <option value="Texas">Texas</option>
                    <option value="Utah">Utah</option>
                    <option value="Vermont">Vermont</option>
                    <option value="Virginia">Virginia</option>
                    <option value="Washington">Washington</option>
                    <option value="Washington DC">Washington DC</option>
                    <option value="West Virginia">West Virginia</option>
                    <option value="Wisconsin">Wisconsin</option>
                    <option value="Wyoming">Wyoming</option>
                </select></td>
            </tr>
            <tr>
                <th>Country</th>
                <td><input type="text" size="40" ng-model="user.country"></td>
            </tr>
        </table>
    </div>
    <form id="passwordReset">
        <div class="content-section container-fluid">
            <div class="formbox-title">Change Password</div>
            <table class="formbox formbox-basic">
                <tr>
                    <th>Old Password</th>
                    <td><input type="password" size="40" ng-model="user.password" form="passwordReset"></td>
                </tr>
                <tr>
                    <th>New Password</th>
                    <td><input type="password" size="40" ng-model="user.newPassword" form="passwordReset"></td>
                </tr>
                <tr>
                    <th>Confirm New Password</th>
                    <td><input type="password" size="40" ng-model="user.newPasswordConfirm" form="passwordReset"></td>
                </tr>
                <tr>
                    <th></th>
                    <td>
                    <button type="submit" class="content-button" ng-click="updatePassword(user)" form="passwordReset">{{passwordText}}</button>
                    </td>
                </tr>
            </table>
        </div>
    </form>

    <div class="content-section container-fluid" ng-repeat="(category, types) in tags">
        <div class="formbox-title">{{category}}</div>

        <div ng-show="types.hasOwnProperty('binary')">
            <table class="formbox formbox-numerical">
                <thead>
                    <tr><div class="formbox-question" style="text-align:left">{{ labels[category] }}</div></tr>
                </thead>
                <thead>
                    <th></th>
                    <th>Yes</th>
                    <th>No</th>
                </thead>
                <tbody>
                    <tr class="formbox-hoverable" ng-repeat="tag in types.binary | orderBy: 'tag.position' track by $index">
                        <td>{{tag.tag.label}}</td>
                        <td ng-click="tag.value = 'yes'"><input type="radio" id="radioBox" name="{{ category + 'binary' + $index}}" value="yes" ng-model="tag.value"><label></label></td>
                        <td ng-click="tag.value = 'no'"><input type="radio" id="radioBox" name="{{ category + 'binary' + $index}}" value="no" ng-model="tag.value"><label></label></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div ng-show="types.hasOwnProperty('scale')">

            <table class="formbox formbox-numerical">
                <thead>
                    <tr><div class="formbox-question">{{ labels[category] }}</div></tr>
                </thead>
                <thead>
                    <th></th>
                    <th>1</th>
                    <th>2</th>
                    <th>3</th>
                    <th>4</th>
                </thead>
                <tbody>
                    <tr class="formbox-hoverable" ng-repeat="tag in types.scale | orderBy: 'tag.position' track by $index">
                        <td>{{tag.tag.label}}</td>
                        <td ng-click="tag.value = 1"><input type="radio" id="radioBox" name="{{ category + 'scale' + $index}}" value="1" ng-model="tag.value"><label></label></td>
                        <td ng-click="tag.value = 2"><input type="radio" id="radioBox" name="{{ category + 'scale' + $index}}" value="2" ng-model="tag.value"><label></label></td>
                        <td ng-click="tag.value = 3"><input type="radio" id="radioBox" name="{{ category + 'scale' + $index}}" value="3" ng-model="tag.value"><label></label></td>
                        <td ng-click="tag.value = 4"><input type="radio" id="radioBox" name="{{ category + 'scale' + $index}}" value="4" ng-model="tag.value"><label></label></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div ng-show="types.hasOwnProperty('text')">
            <table class="formbox formbox-freetext">
                <tr class="formbox-hoverable" ng-repeat="tag in types.text | orderBy: 'tag.position' track by $index">
                    <td>{{tag.tag.label}}</td>
                    <td><textarea name="{{ category + 'text' + $index}}" ng-model="tag.value"></textarea></td>
                </tr>
            </table>
        </div>

    </div>

    <div class="content-section container-fluid">
        <div class="formbox-footer">
            <button class="content-button" ng-click="update(user)">{{ submitText }}</button>
        </div>
    </div>
</div>
</form>

